<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Carrito - Dulce Estrellita | Tu pedido</title>
    <meta
      name="description"
      content="Revisa tu carrito de compras en Dulce Estrellita. Tortas, postres y promociones artesanales en Montevideo."
    />
    <meta name="author" content="Dulce Estrellita" />
    <meta name="theme-color" content="#6e39b7" />
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../img/favicon.png" sizes="32x32" type="image/png" />
    <link rel="apple-touch-icon" href="../img/faviconios.png" sizes="180x180" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <!-- Header con Navbar Bootstrap -->
    <header class="site-header">
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid px-4">
          <a class="navbar-brand" href="../index.html">
            <img
              src="../img/logo.png"
              alt="Dulce Estrellita"
              class="navbar-logo"
            />
          </a>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <!-- Barra de búsqueda -->
            <form class="d-flex me-auto ms-lg-4 navbar-search" id="navSearchForm" role="search">
              <div class="input-group">
                <input type="text" class="form-control" id="navSearchInput" placeholder="Buscar..." aria-label="Buscar">
                <button class="btn btn-outline-light" type="submit">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
                </button>
              </div>
            </form>
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="catalogo.html">Catálogo</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="promos.html">Promos</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="galeria.html">Galería y reseñas</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="nosotros.html">Nosotros</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="carrito.html">Carrito</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <section class="section u-section-space">
        <div class="container">
          <div class="row">
            <div class="col-12 text-center mb-5">
              <h1 class="page-title">Tu Carrito</h1>
              <p class="lead text-muted u-heading-lead">
                Revisa tu pedido antes de continuar
              </p>
            </div>
          </div>

          <!-- Mensaje carrito vacío -->
          <div id="carritoVacio" class="text-center d-none">
            <p class="lead">Tu carrito está vacío</p>
            <a href="catalogo.html" class="btn btn-primary">Ver catálogo</a>
          </div>

          <!-- Contenido del carrito -->
          <div id="carritoContenido">
            <div class="table-responsive">
              <table class="table align-middle">
                <thead>
                  <tr>
                    <th scope="col">Producto</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Subtotal</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody id="carritoItems">
                  <!-- Items inyectados por JS -->
                </tbody>
              </table>
            </div>

            <!-- Total y acciones -->
            <div class="row mt-4">
              <div class="col-md-6">
                <button id="btnVaciar" class="btn btn-outline-danger">
                  Vaciar carrito
                </button>
              </div>
              <div class="col-md-6 text-end">
                <p class="h4 mb-3">Total: <span id="carritoTotal">$0</span></p>
                <button id="btnCheckout" class="btn btn-success btn-lg">
                  Proceder con la compra
                </button>
              </div>
            </div>

            <!-- Formulario de Checkout (collapse) -->
            <div class="collapse mt-4" id="checkoutCollapse">
              <div class="card card-body">
                <h4 class="mb-4">Datos de envío</h4>
                <form id="checkoutForm" novalidate>
                  <div class="row g-3">
                    <!-- Nombre -->
                    <div class="col-md-6">
                      <label for="checkoutNombre" class="form-label">Nombre completo *</label>
                      <input type="text" class="form-control" id="checkoutNombre" 
                             value="María García" required />
                    </div>
                    <!-- Teléfono -->
                    <div class="col-md-6">
                      <label for="checkoutTelefono" class="form-label">Teléfono / WhatsApp *</label>
                      <input type="tel" class="form-control" id="checkoutTelefono" 
                             value="099 123 456" required />
                    </div>
                    <!-- Tipo de entrega -->
                    <div class="col-md-6">
                      <label for="checkoutEntrega" class="form-label">Tipo de entrega *</label>
                      <select class="form-select" id="checkoutEntrega" required>
                        <option value="retiro" selected>Retiro en local</option>
                        <option value="delivery">Delivery (Montevideo)</option>
                      </select>
                    </div>
                    <!-- Dirección -->
                    <div class="col-md-6">
                      <label for="checkoutDireccion" class="form-label">Dirección de entrega</label>
                      <input type="text" class="form-control" id="checkoutDireccion" 
                             placeholder="Solo si elegiste delivery" />
                    </div>
                    <!-- Método de pago -->
                    <div class="col-md-6">
                      <label for="checkoutPago" class="form-label">Método de pago *</label>
                      <select class="form-select" id="checkoutPago" required>
                        <option value="efectivo" selected>Efectivo</option>
                        <option value="transferencia">Transferencia bancaria</option>
                        <option value="mercadopago">MercadoPago</option>
                      </select>
                    </div>
                    <!-- Fecha deseada -->
                    <div class="col-md-6">
                      <label for="checkoutFecha" class="form-label">Fecha deseada de entrega</label>
                      <input type="date" class="form-control" id="checkoutFecha" />
                    </div>
                    <!-- Notas -->
                    <div class="col-12">
                      <label for="checkoutNotas" class="form-label">Notas adicionales</label>
                      <textarea class="form-control" id="checkoutNotas" rows="2" 
                                placeholder="Decoración especial, alergias, etc.">Torta con tema de unicornios</textarea>
                    </div>
                    <!-- Botones -->
                    <div class="col-12 d-flex justify-content-between mt-3">
                      <button type="button" class="btn btn-outline-secondary" 
                              data-bs-toggle="collapse" data-bs-target="#checkoutCollapse">
                        Cancelar
                      </button>
                      <button type="submit" class="btn btn-success btn-lg">
                        Confirmar pedido
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>

            <!-- Mensaje de éxito (post-checkout) -->
            <div id="checkoutExito" class="alert alert-success mt-4 d-none" role="alert">
              <h5 class="alert-heading">¡Pedido confirmado!</h5>
              <p>Te contactaremos por WhatsApp para coordinar los detalles.</p>
              <p class="mb-0">Número de pedido: <strong id="numeroPedido"></strong></p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Pie de página -->
    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-column">
            <h3>Contacto</h3>
            <p>WhatsApp: +598 99 123 456</p>
            <p>Email: hola@dulceestrellita.uy</p>
            <p>Ubicación: Montevideo, Uruguay</p>
            <p>Repostería artesanal por encargo</p>
            <p>Atención 24/7</p>
          </div>

          <div class="footer-column">
            <h3>Seguinos en redes:</h3>
            <p>
              <a
                href="https://www.instagram.com/dulceestrellita.uy/"
                target="_blank"
                >Instagram</a
              >
            </p>
            <p><a href="#" target="_blank">TikTok</a></p>
          </div>

          <div class="footer-column">
            <h3>Newsletter</h3>
            <form class="newsletter-form">
              <input type="email" placeholder="Tu email" required />
              <button type="submit" class="btn btn-newsletter">
                Suscribete!
              </button>
            </form>
          </div>
        </div>

        <div class="footer-bottom">
          <p>© 2025 Dulce Estrellita - Todos los derechos reservados</p>
        </div>
      </div>
    </footer>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Scripts -->
    <script src="../scripts/cart.js" defer></script>
    <script src="../scripts/auth.js" defer></script>
    <script src="../scripts/nav.js" defer></script>
    <script src="../scripts/search.js" defer></script>
    <script src="../scripts/ui.js" defer></script>
    <script src="../scripts/carrito.js" defer></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
